# `<Image>` Component

A fully customizable Vue 3 image component using TypeScript, Inertia.js, and Laravel backends â€” supporting responsive loading, on-demand transformation, and developer-friendly prop validation.

---

## âœ… Features

- Lazy-loaded images with smooth fade-in
- Runtime image transformation via Laravel route
- `srcset` support for responsive images
- Placeholder and blur support while loading
- Boolean prop support (e.g. `scale`, `flip`) automatically stringified
- Enforced crop logic: `crop` only applies if both `width` and `height` are defined
- Retina-aware sizing using device pixel ratio

---

## ğŸ§© Props

Defined in a reusable `ImageProps` interface with default values via `withDefaults`.

### ğŸ”¹ Required Props

| Prop | Type | Description |
|------|------|-------------|
| `src` | `string` | Source of the image, relative to your appâ€™s `storage_url` |

---

### ğŸ”¸ Optional Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `alt` | `string` | `''` | Image alt text |
| `enableSrcset` | `boolean` | `false` | Enables responsive image variants |
| `srcsetSizes` | `number[]` | `[320, 640, 960]` | Widths to use in the generated `srcset` |
| `srcsetMaxWidth` | `number \| string \| null` | `1280` | Max width limit for `srcset` |
| `blur` | `number \| string \| null` | â€” | Adds blur effect to image |
| `scale` | `boolean \| string \| null` | â€” | Whether to scale image (converted to `"true"` / `"false"`) |
| `crop` | `'top' \| 'bottom' \| 'left' \| 'right' \| 'center' \| null` | â€” | Crop alignment (**requires** `width` + `height`) |
| `quality` | `number \| string \| null` | â€” | Compression quality (0â€“100) |
| `contrast` | `number \| string \| null` | â€” | Adjust contrast (-100 to 100) |
| `version` | `number \| string \| null` | â€” | Optional version for cache busting |
| `format` | `'jpg' \| 'jpeg' \| 'png' \| 'gif' \| 'webp' \| null` | â€” | Output image format |
| `flip` | `'h' \| 'v' \| 'hv' \| null` | â€” | Horizontal/vertical flip |
| `background` | `string` | â€” | Background color in hex (`fff`, `000000`, etc.) |
| `width` | `string \| number \| null` | â€” | Image width (used in URL transformation) |
| `height` | `string \| number \| null` | â€” | Image height (used in URL transformation) |
| `placeholder` | `string` | `PlaceholderImage` | Local placeholder used before load and on error |

---

## ğŸš¨ Special Rules

- `crop` will **only** be applied if both `width` and `height` are provided.
- `boolean` values like `scale: true` will be converted to `"true"` in the URL.
- `width` and `height` values are multiplied by `devicePixelRatio` to serve retina-appropriate images.
- A dev-mode assertion will throw an error if `crop` is used without `width` and `height`.

---

## ğŸ’¡ Behavior

### Final Image URL
The final image source is dynamically generated by calling a named Laravel route:
```ts
image.transform(path: string, options: string)
```
Where `options` is a comma-separated list of key=value pairs.

### Responsive Images (`srcset`)
If `enableSrcset` is `true` and no fixed `height` is set:
- Multiple widths will be generated from `srcsetSizes` and `srcsetMaxWidth`
- A `srcset` and `sizes` attribute will be applied to the `<img>`

---

## ğŸ–¼ Display Logic

- Images load with `loading="lazy"`
- Before loading: a `placeholder` background is used with a Tailwind `animate-pulse` class
- After loading: the placeholder fades out, and the real image is shown
- On load failure: the `placeholder` image is shown in place of the broken source

---

## ğŸ” Example Usage

```vue
<Image
  src="storage/books/cover.jpg"
  alt="The Hobbit"
  :width="320"
  :height="480"
  crop="center"
  :blur="5"
  :scale="true"
  :enableSrcset="true"
  format="webp"
  background="f0f0f0"
/>
```
---
## ğŸ§  Summary

âœ… Full TypeScript typing  
âœ… Responsive, accessible, performant  
âœ… Flexible transformation control  
âœ… Strict guardrails to prevent misuse  
